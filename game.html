<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <title>Table Talk</title>
    <link rel="stylesheet" href="stylesheets/shared.css">
    <link rel="stylesheet" href="stylesheets/game.css">
    <link rel="stylesheet" href="stylesheets/options.css">
    <link rel="stylesheet" href="stylesheets/images.css">
    <script src="scripts/shared.js" defer></script>
    <script src="scripts/session-manager.js" defer></script>
    <script src="scripts/game.js" defer></script>
</head>
<body class="game-page">
    <header id="header">
        <div class="direction">
            <h1>Directions: </h1>            
        </div>
        <button id="open_page" type="button"><img src="images/chevron-down.svg" alt="open page"></button>
        <button id="theme-toggle" type="button" title="Switch Theme">üåô</button>
        <div id="directions">
            <p>Choose a topic from the dropdown or use Random to get started. Click the circular switch button to get a new question. When it's your turn, select your preferred option and click Submit. After everyone has answered, click 'All Answers Finished' to see everyone's choices and discuss the results!</p>
            <p><strong>Need to change players?</strong> <a href="index.html">‚Üê Back to Setup</a></p>
        </div>
    </header>
    <main>
        <!-- Player turn indicator -->
        <div id="playerTurnIndicator" class="player-turn-indicator smooth-transition hidden">
            <span class="turn-text smooth-transition">Current Player:</span>
            <span class="current-player-name" id="currentPlayerName"></span>
        </div>
        <h1 class="question" id="question"></h1>

        <div class="controls">
            <div class="switch-container">
                <button class="switch_button smooth-transition flex-center" id="switchQuestion" type="button">
                    <svg id="changeQ"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M4.56079 10.6418L6.35394 3.94971L8.25402 5.84979C11.7312 3.6588 16.3814 4.07764 19.41 7.1063L17.9958 8.52052C15.7536 6.27827 12.3686 5.87519 9.71551 7.31128L11.2529 8.84869L4.56079 10.6418Z"
                        fill="currentColor"
                      />
                      <path
                        d="M19.4392 13.3581L17.646 20.0502L15.7459 18.1501C12.2688 20.3411 7.61857 19.9223 4.58991 16.8936L6.00413 15.4794C8.24638 17.7217 11.6313 18.1247 14.2844 16.6887L12.747 15.1512L19.4392 13.3581Z"
                        fill="currentColor"
                      />
                    </svg>
                </button>
                <span class="switch-label">Switch Question</span>
            </div>
            <div class="save-container">
                <button class="save-game-btn smooth-transition flex-center" id="saveGameBtn" type="button" title="Save Game Progress">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3ZM19 19H5V5H16.17L19 7.83V19ZM12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12ZM6 6H15V10H6V6Z" fill="currentColor"/>
                    </svg>
                </button>
                <span class="save-label">Save Game</span>
            </div>
            <div class="topic-selection">
                <!-- Always visible buttons -->
                <div class="primary-controls">
                    <button class="smooth-transition" id="startButton">Start</button>
                    <button class="smooth-transition" id="randomButton">Random</button>
                    <button class="smooth-transition" id="topicsToggle">Topics ‚ñº</button>
                </div>
                
                <!-- Collapsible topic grid with pagination -->
                <div class="topics-panel" id="topicsPanel" class="hidden">
                    <div class="topics-pagination-header">
                        <span class="page-info" id="pageInfo">Page 1 of 2</span>
                        <div class="pagination-controls">
                            <button class="page-btn smooth-transition" id="prevPageBtn" disabled>‚Äπ Previous</button>
                            <button class="page-btn smooth-transition" id="nextPageBtn">Next ‚Ä∫</button>
                        </div>
                    </div>
                    <div class="topics-grid" id="topicsGrid">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Image-based preference selection -->
        <div class="preference-container" id="preferenceContainer" class="hidden">
            <div class="preference-options">
                <div class="preference-option" id="option1" data-choice="option1">
                    <div class="preference-label" id="option1Label">Option 1</div>
                    <div class="preference-image" id="option1Image">
                        <!-- Image will be loaded here -->
                    </div>
                </div>
                <div class="preference-option" id="option2" data-choice="option2">
                    <div class="preference-label" id="option2Label">Option 2</div>
                    <div class="preference-image" id="option2Image">
                        <!-- Image will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Hidden field to store the selected preference -->
        <input type="hidden" id="selectedPreference" value="">
        <div class="buttons">
            <button class="submit smooth-transition" id="submitButton" type="submit">Submit Answer</button>
            <button class="fin" id="final_submit" type="button">All Answers Finished</button>
        </div>
    </main>
    <footer>
        <h2>About: </h2>
        <p>The purpose of this game is to get to know people.</p>
        <p>Ask Away</p>
    </footer>
</body>
</html>