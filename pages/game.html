<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<title>Table Talk</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css">
<!-- Core shared styles -->
<link rel="stylesheet" href="../assets/css/shared/variables.css">
<link rel="stylesheet" href="../assets/css/shared/typography.css">
<link rel="stylesheet" href="../assets/css/shared/buttons.css">
<link rel="stylesheet" href="../assets/css/shared/forms.css">
<link rel="stylesheet" href="../assets/css/shared/animations.css">
<link rel="stylesheet" href="../assets/css/shared/utilities.css">
<link rel="stylesheet" href="../assets/css/shared/responsive.css">
<!-- Game-specific styles (split for maintainability) -->
<link rel="stylesheet" href="../assets/css/game/game-shared.css">
<link rel="stylesheet" href="../assets/css/game/game-layout.css">
<link rel="stylesheet" href="../assets/css/game/game-controls.css">
<link rel="stylesheet" href="../assets/css/game/game-topics.css">
<link rel="stylesheet" href="../assets/css/game/game-multiplayer.css">
<link rel="stylesheet" href="../assets/css/components/options.css">
<link rel="stylesheet" href="../assets/css/components/images.css">
<link rel="stylesheet" href="../assets/css/components/remote.css">
<script src="../src/utilities/theme-utilities.js" defer></script>
<!-- Socket.io for multiplayer -->
<script src="/socket.io/socket.io.js"></script>
<!-- Core game modules -->
<script src="../src/config/game-config.js" type="module" defer></script>
<script src="../src/core/game-core.js" type="module" defer></script>
<script src="../src/core/game-player.js" type="module" defer></script>
<script src="../src/core/game-ui.js" type="module" defer></script>
<script src="../src/core/game-loader.js" type="module" defer></script>
<!-- Multiplayer manager -->
<script src="../src/multiplayer/multiplayer-manager.js" defer></script>

</head>
<body class="game-page" id="root">
<header id="header">
<div class="direction">
<h1>Directions: </h1>
</div>
<div class="header-controls">
<button id="open_page" type="button"><img src="../assets/images/icons/chevron-down.svg" alt="open page"></button>
</div>
<div id="directions">
<p>Choose a topic from the dropdown or use Random to get started. Click the circular switch button to get a new question. When it's your turn, select your preferred option and click Submit. After everyone has answered, click 'All Answers Finished' to see everyone's choices and discuss the results!</p>
<div class="game-navigation">
<button class="back-to-mode-btn smooth-transition" id="backToModeBtn" type="button" onclick="window.location.href='index.html'">
<img src="../assets/images/icons/previous.svg" alt="Back" width="16" height="16">
Back to Game Mode
</button>
<p class="setup-link"><strong>Need to change players?</strong> <a href="index.html">‚Üê Back to Setup</a></p>
</div>

<!-- Offline Mode Notice -->
<div id="offlineModeNotice" class="offline-notice hidden" style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 10px; margin: 10px 0; border-radius: 5px;">
<p><strong>Offline Mode:</strong> Pass this device between players for their turns. Everyone takes turns on the same screen.</p>
</div>
</div>

<!-- Multiplayer Room Info (hidden until room is created) -->
<div id="multiplayerInfo" class="multiplayer-info hidden">
<div class="room-display">
<div class="room-code-section">
<span class="room-label">Room Code:</span>
<span class="room-code" id="roomCodeDisplay">----</span>
<button class="copy-code-btn" id="copyCodeBtn" title="Copy room code">Copy</button>
</div>
<div class="players-section">
<span class="players-label">Connected Players (<span id="playerCount">0</span>):</span>
<div class="players-list" id="connectedPlayersList"></div>
</div>
</div>
<div class="multiplayer-actions">
<button class="create-room-btn" id="createRoomBtn">Create Room for Phones</button>
<button class="close-room-btn hidden" id="closeRoomBtn">Close Room</button>
</div>
</div>
</header>
<main>
<!-- Player turn indicator removed for multiplayer -->
<h1 class="question" id="question"></h1>
<div class="topic-selection">
<button class="smooth-transition" id="topicsToggle">Topics ‚ñº</button>
<!-- Collapsible topic grid with pagination -->
<div class="topics-panel hidden" id="topicsPanel">
<div class="topics-pagination-header">
<span class="page-info" id="pageInfo">Page 1 of 2</span>
<div class="pagination-controls">
<button class="page-btn smooth-transition" id="prevPageBtn" disabled>‚Äπ Previous</button>
<button class="page-btn smooth-transition" id="nextPageBtn">Next ‚Ä∫</button>
</div>
</div>
<div class="topics-grid" id="topicsGrid">
<!-- Populated by JavaScript -->
</div>
</div>
</div>
<!-- Topic display -->
<div id="currentTopicDisplay" class="current-topic-display">
<span class="topic-name" id="currentTopicName">Instructions</span>
</div>
<!-- Remote Control Layout -->
<div class="remote-control">
<div class="remote-row">
<!-- Random Topic Button -->
<div class="remote-button-container">
<button class="remote-btn smooth-transition" id="randomTopicBtn" type="button" title="Random Topic">
<img src="../assets/images/icons/random-dice.svg" alt="Random Topic" width="20" height="20">
</button>
<span class="remote-label">Random Topic</span>
</div>

<!-- Previous Question Button -->
<div class="remote-button-container">
<button class="remote-btn smooth-transition" id="prevQuestionBtn" type="button" title="Previous Question">
<img src="../assets/images/icons/previous.svg" alt="Previous" width="20" height="20">
</button>
<span class="remote-label">Previous</span>
</div>

<!-- Random Question Button (Center) -->
<div class="remote-button-container center">
<button class="switch_button smooth-transition flex-center" id="switchQuestion" type="button" title="Random Question in Current Topic">
<img id="changeQ" src="../assets/images/icons/refresh.svg" alt="Switch Question" width="24" height="24">
</button>
<span class="remote-label">Random Question</span>
</div>

<!-- Next Question Button -->
<div class="remote-button-container">
<button class="remote-btn smooth-transition" id="nextQuestionBtn" type="button" title="Next Question">
<img src="../assets/images/icons/next.svg" alt="Next" width="20" height="20">
</button>
<span class="remote-label">Next</span>
</div>

<!-- Skip Question Button -->
<div class="remote-button-container">
<button class="remote-btn smooth-transition" id="skipQuestionBtn" type="button" title="Skip This Question">
<img src="../assets/images/icons/skip.svg" alt="Skip" width="20" height="20">
</button>
<span class="remote-label">Skip Question</span>
</div>
</div>
</div>
<!-- Image-based preference selection -->
<div class="preference-container" id="preferenceContainer" class="hidden">
<div class="preference-options">
<div class="preference-option" id="option1" data-choice="option1">
<div class="preference-label" id="option1Label">Option 1</div>
<div class="preference-image" id="option1Image">
<!-- Image will be loaded here -->
</div>
</div>
<div class="preference-option" id="option2" data-choice="option2">
<div class="preference-label" id="option2Label">Option 2</div>
<div class="preference-image" id="option2Image">
<!-- Image will be loaded here -->
</div>
</div>
</div>
</div>
<!-- Hidden field to store the selected preference -->
<input type="hidden" id="selectedPreference" value="">
<div class="buttons">
<button class="submit smooth-transition" id="submitButton" type="submit">Submit Answer</button>
<button class="fin" id="final_submit" type="button">All Answers Finished</button>
</div>

<!-- Results Section (hidden during gameplay) -->
<section id="gameResults" class="game-results hidden">
    <div class="results-container">
        <header class="results-header">
            <h2>üéâ Game Complete!</h2>
            <p class="results-subtitle">Here's a summary of your Table Talk session</p>
        </header>
        
        <div class="results-content">
            <div class="game-stats">
                <div class="stat-item">
                    <span class="stat-label">Questions Answered:</span>
                    <span class="stat-value" id="totalQuestions">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Players:</span>
                    <span class="stat-value" id="totalPlayers">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Game Duration:</span>
                    <span class="stat-value" id="gameDuration">--</span>
                </div>
            </div>
            
            <div class="questions-summary">
                <h3>Questions & Answers</h3>
                <div id="questionsList" class="questions-list">
                    <!-- Questions and answers will be populated here -->
                </div>
            </div>
        </div>
        
        <div class="results-actions">
            <button class="start-btn" id="continueGameBtn" type="button">Continue Playing</button>
            <button class="secondary-btn" id="playAgainBtn" type="button">Play Again</button>
            <button class="secondary-btn" id="backToMenuBtn" type="button">Back to Menu</button>
        </div>
    </div>
</section>
</main>



<footer>
<h2>About: </h2>
<p>The purpose of this game is to get to know people.</p>
<p>Ask Away</p>
</footer>

<!-- Conditionally load multiplayer scripts -->

</body>
</html>